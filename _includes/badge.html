{% assign tone = include.tone | default: 'info' %}
{% assign size = include.size | default: 'md' %}
{% assign interactive = include.interactive | default: false %}
{% assign base_class = 'inline-flex items-center rounded-full font-medium tracking-tight transition-all duration-200 ease-out' %}

{% comment %}
Interactive badges get hover states and can be clicked/focused.
Non-interactive badges are purely informational.
{% endcomment %}

{% if interactive %}
  {% assign base_class = base_class | append: ' cursor-pointer hover:scale-105 hover:shadow-subtle focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-sky/30 focus-visible:ring-offset-1 active:scale-95' %}
{% endif %}

{% comment %}Extract common badge styles{% endcomment %}
{% assign common_class = 'border shadow-sm' %}

{% case tone %}
  {% when 'impact' %}
    {% assign tone_class = common_class | append: ' border-brand-forest bg-brand-forest text-white' %}
    {% if interactive %}
      {% assign tone_class = tone_class | append: ' hover:bg-brand-sea hover:border-brand-sea hover:text-white' %}
    {% endif %}
  {% when 'department' %}
    {% assign tone_class = common_class | append: ' border-brand-sky bg-brand-sky text-white' %}
    {% if interactive %}
      {% assign tone_class = tone_class | append: ' hover:bg-brand-indigo hover:border-brand-indigo hover:text-white' %}
    {% endif %}
  {% when 'track' %}
    {% assign tone_class = common_class | append: ' border-brand-gold bg-brand-gold text-brand-navy' %}
    {% if interactive %}
      {% assign tone_class = tone_class | append: ' hover:bg-brand-amber hover:border-brand-amber hover:text-white' %}
    {% endif %}
  {% when 'neutral' %}
    {% assign tone_class = common_class | append: ' border-brand-cream bg-brand-cream text-brand-navy' %}
    {% if interactive %}
      {% assign tone_class = tone_class | append: ' hover:border-brand-indigo/30 hover:bg-white hover:text-brand-navy' %}
    {% endif %}
  {% else %}
    {% assign tone_class = common_class | append: ' border-brand-sky bg-brand-sky text-white' %}
    {% if interactive %}
      {% assign tone_class = tone_class | append: ' hover:bg-brand-indigo hover:border-brand-indigo hover:text-white' %}
    {% endif %}
{% endcase %}
{% case size %}
  {% when 'sm' %}
    {% assign size_class = 'px-2.5 py-1 text-xs' %}
  {% when 'lg' %}
    {% assign size_class = 'px-4 py-2 text-sm' %}
  {% else %}
    {% assign size_class = 'px-3 py-1.5 text-xs' %}
{% endcase %}
{% if interactive and include.href %}
<a href="{{ include.href | relative_url }}" class="{{ base_class }} {{ tone_class }} {{ size_class }}"{% if include.aria_label %} aria-label="{{ include.aria_label }}"{% endif %}{% if include.target %} target="{{ include.target }}"{% endif %}{% if include.rel %} rel="{{ include.rel }}"{% endif %}>
  {% if include.icon_name %}
    {% include icon.html name=include.icon_name size='xs' class='mr-1.5' %}
  {% elsif include.icon %}
    <span class="mr-1.5 inline-flex h-3.5 w-3.5 items-center justify-center">
      {{ include.icon }}
    </span>
  {% endif %}
  {{ include.label }}
</a>
{% elsif interactive %}
<button type="button" class="{{ base_class }} {{ tone_class }} {{ size_class }}"{% if include.data_attrs %} {{ include.data_attrs }}{% endif %}{% if include.aria_label %} aria-label="{{ include.aria_label }}"{% endif %}>
  {% if include.icon_name %}
    {% include icon.html name=include.icon_name size='xs' class='mr-1.5' %}
  {% elsif include.icon %}
    <span class="mr-1.5 inline-flex h-3.5 w-3.5 items-center justify-center">
      {{ include.icon }}
    </span>
  {% endif %}
  {{ include.label }}
</button>
{% else %}
<span class="{{ base_class }} {{ tone_class }} {{ size_class }}"{% if include.aria_label %} aria-label="{{ include.aria_label }}"{% endif %}>
  {% if include.icon_name %}
    {% include icon.html name=include.icon_name size='xs' class='mr-1.5' %}
  {% elsif include.icon %}
    <span class="mr-1.5 inline-flex h-3.5 w-3.5 items-center justify-center">
      {{ include.icon }}
    </span>
  {% endif %}
  {{ include.label }}
</span>
{% endif %}
