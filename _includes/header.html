{% assign nav_links = nav_links | default: site.data.navigation %}
<header class="relative z-40" data-component="site-header">
  <div class="absolute inset-x-0 top-0 h-full pointer-events-none">
    <div class="h-full w-full bg-gradient-to-b from-white via-white/90 to-transparent backdrop-blur"></div>
  </div>
  <div class="relative mx-auto flex max-w-7xl items-center justify-between px-4 py-5 sm:px-6 lg:px-8">
    <a class="flex items-center gap-3 text-brand-navy transition-opacity duration-200 hover:opacity-80 focus:outline-none focus-visible:ring-4 focus-visible:ring-brand-sky/30 focus-visible:ring-offset-2" href="{{ '/' | relative_url }}">
      {% include coa-seal.html size="h-12 w-12" %}
      <div class="flex flex-col">
        <span class="text-sm font-medium uppercase tracking-[0.18em] text-brand-slate">City of Austin</span>
        <span class="text-xl font-semibold text-brand-navy">{{ site.title }}</span>
      </div>
    </a>

    <div class="flex items-center gap-4">
      <nav class="hidden items-center gap-1 lg:flex" aria-label="Primary navigation">
        {% assign current_url = page.url | default: '/' %}
        {% for item in nav_links %}
          {% assign href = item.url | default: '/' %}
          {% assign normalized = href | relative_url %}
          {% capture is_active %}{% if current_url == normalized or current_url == href %}true{% elsif current_url != '/' and current_url contains href and href != '/' %}true{% else %}false{% endif %}{% endcapture %}
          <a href="{{ href | relative_url }}" class="rounded-full px-4 py-2 text-sm font-medium transition-all duration-200 focus:outline-none focus-visible:ring-4 focus-visible:ring-brand-sky/30 focus-visible:ring-offset-1 {% if is_active == 'true' %}bg-brand-sky/15 text-brand-navy{% else %}text-brand-stone hover:bg-brand-sky/10 hover:text-brand-navy{% endif %}" {% if is_active == 'true' %}aria-current="page"{% endif %}>{{ item.label }}</a>
        {% endfor %}
      </nav>
      <a class="hidden rounded-full border border-brand-sky/70 bg-brand-sky px-5 py-2 text-sm font-semibold text-white shadow-subtle transition-all duration-200 hover:-translate-y-0.5 hover:bg-brand-indigo hover:shadow-card focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-sky/40 focus-visible:ring-offset-2 lg:inline-flex" href="{{ site.github.repository_url }}/issues/new?template=new-team.yml" target="_blank" rel="noopener noreferrer">Submit Project</a>

      <button type="button" class="inline-flex items-center justify-center rounded-full border border-brand-sky/20 bg-white p-2 text-brand-navy shadow-subtle transition-all duration-200 hover:-translate-y-0.5 hover:bg-brand-sky/10 hover:shadow-card focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-sky/30 focus-visible:ring-offset-2 lg:hidden" data-nav-toggle aria-expanded="false" aria-controls="mobile-nav" aria-label="Toggle navigation">
        <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>
  </div>

  <div id="mobile-nav" data-nav-panel class="hidden lg:hidden">
    <nav class="mx-auto mb-4 flex max-w-7xl flex-col gap-1 px-4 sm:px-6" aria-label="Mobile navigation">
      {% for item in nav_links %}
        <a href="{{ item.url | relative_url }}" class="rounded-xl border border-brand-sky/20 bg-white px-4 py-3 text-base font-medium text-brand-navy shadow-subtle transition-all duration-200 hover:bg-brand-sky/10 hover:border-brand-sky/30 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-sky/30 focus-visible:ring-offset-2">{{ item.label }}</a>
      {% endfor %}
      <a href="{{ site.github.repository_url }}/issues/new?template=new-team.yml" target="_blank" rel="noopener noreferrer" class="mt-2 inline-flex items-center justify-center rounded-xl bg-brand-sky px-4 py-3 text-base font-semibold text-white shadow-subtle transition-all duration-200 hover:bg-brand-indigo hover:shadow-card focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-sky/40 focus-visible:ring-offset-2">Submit Project</a>
    </nav>
  </div>
</header>
